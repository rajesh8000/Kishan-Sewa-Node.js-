{"ast":null,"code":"import myKey from './KhaltiKey';\nimport axios from 'axios';\nimport updateOrderToDelivered from '.';\nlet orderId = '';\nconst config = {\n  publicKey: myKey.publicTestKey,\n  productIdentity: '1231421223',\n  productName: 'Tomatooes',\n  productUrl: 'http://localhost:3000',\n  eventHandler: {\n    onSuccess(payload) {\n      const data = {\n        token: payload.token,\n        amount: payload.amount,\n        orderId: orderId\n      };\n      axios.post('http://localhost:5000/api/orders/verifypayment', data).then(response => {\n        console.log(response.data); // verify status\n\n        // Update the database if the payment was successful\n        if (response.data.status === 'success') {\n          const orderId = response.data.order._id;\n          updateOrderToDelivered(orderId);\n\n          // Send a PATCH request to update the order's isDelivered field to true\n          axios.put(`http://localhost:5000/api/orders/${orderId}/deliver`).then(response => {\n            console.log(response.data); // updated order object\n          }).catch(error => {\n            console.log(error.message);\n          });\n        }\n      }).catch(error => {\n        console.log(error.message);\n      });\n    },\n    onError(error) {\n      console.log(error);\n    },\n    onClose() {\n      console.log('widget is closing');\n    }\n  },\n  paymentPreference: ['KHALTI', 'EBANKING', 'MOBILE_BANKING', 'CONNECT_IPS', 'SCT']\n};\nexport default config;","map":{"version":3,"names":["myKey","axios","updateOrderToDelivered","orderId","config","publicKey","publicTestKey","productIdentity","productName","productUrl","eventHandler","onSuccess","payload","data","token","amount","post","then","response","console","log","status","order","_id","put","catch","error","message","onError","onClose","paymentPreference"],"sources":["D:/fff/Fyp/frontend/src/components/Khalti/KhaltiConfig.js"],"sourcesContent":["import myKey from './KhaltiKey';\r\nimport axios from 'axios';\r\nimport updateOrderToDelivered from '.'\r\n\r\n\r\nlet orderId = '';\r\nconst config = {\r\n  publicKey: myKey.publicTestKey,\r\n  productIdentity: '1231421223',\r\n  productName: 'Tomatooes',\r\n  productUrl: 'http://localhost:3000',\r\n  \r\n  eventHandler: {\r\n    \r\n    onSuccess(payload) {\r\n      const data = {\r\n        token: payload.token,\r\n        amount: payload.amount,\r\n        orderId:orderId\r\n         \r\n      };\r\n     \r\n      \r\n\r\naxios.post('http://localhost:5000/api/orders/verifypayment',data )\r\n     .then((response) => {\r\n    console.log(response.data); // verify status\r\n\r\n\r\n   // Update the database if the payment was successful\r\n   if (response.data.status === 'success') {\r\n    const orderId = response.data.order._id;\r\n\r\n\r\n    updateOrderToDelivered(orderId);\r\n\r\n    // Send a PATCH request to update the order's isDelivered field to true\r\n    axios.put(`http://localhost:5000/api/orders/${orderId}/deliver`)\r\n      .then((response) => {\r\n        console.log(response.data); // updated order object\r\n      })\r\n      .catch((error) => {\r\n        console.log(error.message);\r\n      });\r\n  }\r\n})\r\n    \r\n  .catch((error) => {\r\n    console.log(error.message);\r\n  });\r\n    },\r\n\r\n    onError(error) {\r\n      console.log(error);\r\n    },\r\n    onClose() {\r\n      console.log('widget is closing');\r\n    },\r\n  },\r\n  paymentPreference: [\r\n    'KHALTI',\r\n    'EBANKING',\r\n    'MOBILE_BANKING',\r\n    'CONNECT_IPS',\r\n    'SCT',\r\n  ],\r\n};\r\n\r\nexport default config;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,aAAa;AAC/B,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,sBAAsB,MAAM,GAAG;AAGtC,IAAIC,OAAO,GAAG,EAAE;AAChB,MAAMC,MAAM,GAAG;EACbC,SAAS,EAAEL,KAAK,CAACM,aAAa;EAC9BC,eAAe,EAAE,YAAY;EAC7BC,WAAW,EAAE,WAAW;EACxBC,UAAU,EAAE,uBAAuB;EAEnCC,YAAY,EAAE;IAEZC,SAASA,CAACC,OAAO,EAAE;MACjB,MAAMC,IAAI,GAAG;QACXC,KAAK,EAAEF,OAAO,CAACE,KAAK;QACpBC,MAAM,EAAEH,OAAO,CAACG,MAAM;QACtBZ,OAAO,EAACA;MAEV,CAAC;MAIPF,KAAK,CAACe,IAAI,CAAC,gDAAgD,EAACH,IAAI,CAAE,CAC5DI,IAAI,CAAEC,QAAQ,IAAK;QACrBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACL,IAAI,CAAC,CAAC,CAAC;;QAG7B;QACA,IAAIK,QAAQ,CAACL,IAAI,CAACQ,MAAM,KAAK,SAAS,EAAE;UACvC,MAAMlB,OAAO,GAAGe,QAAQ,CAACL,IAAI,CAACS,KAAK,CAACC,GAAG;UAGvCrB,sBAAsB,CAACC,OAAO,CAAC;;UAE/B;UACAF,KAAK,CAACuB,GAAG,CAAE,oCAAmCrB,OAAQ,UAAS,CAAC,CAC7Dc,IAAI,CAAEC,QAAQ,IAAK;YAClBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACL,IAAI,CAAC,CAAC,CAAC;UAC9B,CAAC,CAAC,CACDY,KAAK,CAAEC,KAAK,IAAK;YAChBP,OAAO,CAACC,GAAG,CAACM,KAAK,CAACC,OAAO,CAAC;UAC5B,CAAC,CAAC;QACN;MACF,CAAC,CAAC,CAECF,KAAK,CAAEC,KAAK,IAAK;QAChBP,OAAO,CAACC,GAAG,CAACM,KAAK,CAACC,OAAO,CAAC;MAC5B,CAAC,CAAC;IACA,CAAC;IAEDC,OAAOA,CAACF,KAAK,EAAE;MACbP,OAAO,CAACC,GAAG,CAACM,KAAK,CAAC;IACpB,CAAC;IACDG,OAAOA,CAAA,EAAG;MACRV,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;IAClC;EACF,CAAC;EACDU,iBAAiB,EAAE,CACjB,QAAQ,EACR,UAAU,EACV,gBAAgB,EAChB,aAAa,EACb,KAAK;AAET,CAAC;AAED,eAAe1B,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}